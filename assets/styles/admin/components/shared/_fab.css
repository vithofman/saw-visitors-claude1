/**
 * SAW Admin - Floating Action Buttons
 * @package SAW_Visitors
 * @version 4.0.0
 * 
 * FIXED: FAB buttons now stay visible when sidebar is open (moved to left of sidebar)
 */

.sa-fab {
    position: fixed;
    bottom: calc(45px + var(--saw-space-4)); /* Footer height (45px) + spacing */
    right: var(--saw-space-6);
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--saw-brand-600);
    color: #ffffff;
    border: none;
    border-radius: var(--saw-radius-full);
    box-shadow: var(--saw-shadow-lg);
    cursor: pointer;
    transition: all var(--saw-transition-fast);
    z-index: var(--saw-z-fixed);
}

.sa-fab:hover {
    background: var(--saw-brand-700);
    box-shadow: var(--saw-shadow-xl);
    transform: scale(1.05);
}

.sa-fab--sm {
    width: 48px;
    height: 48px;
}

.sa-fab--lg {
    width: 64px;
    height: 64px;
}

/* FAB Group - pro v√≠ce float buttons */
.sa-fab-group {
    position: fixed;
    bottom: calc(45px + var(--saw-space-4)); /* Footer height (45px) + spacing */
    right: var(--saw-space-6);
    display: flex;
    flex-direction: column;
    gap: var(--saw-space-3);
    z-index: var(--saw-z-fixed);
}

.sa-fab-group .sa-fab {
    position: relative;
    bottom: auto;
    right: auto;
}

/* ============================================
   FAB POSITIONING WHEN SIDEBAR IS OPEN
   Move FAB to the LEFT of the sidebar so it stays visible
   ============================================ */

/* Desktop: Sidebar is 720px, move FAB to left of it */
body:has(.sa-sidebar--active) .sa-fab,
body:has(.sa-sidebar--active) .sa-fab-group {
    right: calc(720px + var(--saw-space-6, 24px)) !important;
    z-index: 10001 !important; /* Above sidebar */
    transition: right 0.3s ease, z-index 0s;
}

/* Tablet (769-1024px): Sidebar is 480px */
@media (max-width: 1024px) and (min-width: 769px) {
    .sa-fab,
    .sa-fab-group {
        bottom: calc(var(--saw-bottom-nav-height, 52px) + var(--saw-space-4, 16px));
    }
    
    body:has(.sa-sidebar--active) .sa-fab,
    body:has(.sa-sidebar--active) .sa-fab-group {
        right: calc(480px + var(--saw-space-4, 16px)) !important;
    }
}

/* Mobile (768px and below): Sidebar is 100%, hide FAB or move to top */
@media (max-width: 768px) {
    .sa-fab,
    .sa-fab-group {
        bottom: calc(var(--saw-bottom-nav-height-mobile, 48px) + var(--saw-space-3, 12px));
        right: var(--saw-space-4);
    }
    
    /* On mobile with full-width sidebar, move FAB above sidebar header */
    body:has(.sa-sidebar--active) .sa-fab,
    body:has(.sa-sidebar--active) .sa-fab-group {
        /* Position in top-right corner, above sidebar content */
        bottom: auto !important;
        top: calc(60px + var(--saw-space-3, 12px)) !important;
        right: var(--saw-space-4) !important;
        z-index: 10001 !important;
    }
}

/* Secondary a danger varianty pro FAB */
.sa-fab--secondary {
    background: var(--saw-gray-600);
}

.sa-fab--secondary:hover {
    background: var(--saw-gray-700);
}

.sa-fab--danger {
    background: var(--saw-danger, #dc2626);
}

.sa-fab--danger:hover {
    background: var(--saw-danger-dark, #b91c1c);
}

/* Loading state for FAB buttons */
.sa-fab.is-loading {
    pointer-events: none;
    opacity: 0.7;
}

.sa-fab.is-loading svg {
    animation: saw-spin 1s linear infinite;
}

@keyframes saw-spin {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

/* FAB Group - detail mode styling */
.sa-fab-group[data-sidebar-mode="detail"] {
    /* Positioned in the table panel, not in sidebar */
}

/* All FABs in group should have consistent size */
.sa-fab-group .sa-fab {
    width: 56px;
    height: 56px;
}
