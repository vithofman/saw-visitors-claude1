/**
 * SAW Admin - Table Element (<table>, <thead>, <tbody>, <tr>, <td>)
 * @package SAW_Visitors
 * @version 7.0.0 - JS Transform Sticky
 */

/* ============================================
   TABLE BASE
   ============================================ */
.sa-table-element {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    background: transparent; /* Transparent to show parent gradient */
}

/* ============================================
   THEAD - CSS STICKY
   ============================================ */
.sa-table-thead {
    display: table-header-group;
}

.sa-table-thead .sa-table-row,
.sa-table-thead tr {
    display: table-row;
}

/* TH elementy - CSS STICKY pod toolbarem */
.sa-table-thead th,
.sa-table-th {
    display: table-cell;
    
    /* STICKY - pod toolbarem */
    position: sticky !important;
    top: var(--saw-toolbar-height, 46px) !important; /* CSS proměnná s fallbackem */
    z-index: 99 !important;
    background: rgba(255, 255, 255, 0.95) !important; /* Více opaque */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    
    /* Styling */
    padding: 8px var(--saw-space-4);
    font-size: var(--saw-text-xs);
    font-weight: var(--saw-font-semibold);
    text-align: left;
    color: var(--saw-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    line-height: 1.3;
    border-bottom: 2px solid var(--saw-border-color);
    border-left: 1px solid transparent;
    border-right: 1px solid transparent;
}

.sa-table-thead th:first-child,
.sa-table-th:first-child {
    border-left: none;
}

.sa-table-thead th:last-child,
.sa-table-th:last-child {
    border-right: none;
}

/* ============================================
   TBODY
   ============================================ */
.sa-table-tbody {
    display: table-row-group;
}

.sa-table-tbody .sa-table-row {
    display: table-row;
    transition: background var(--saw-transition-fast);
}

.sa-table-tbody .sa-table-row:hover {
    background: var(--saw-bg-secondary);
}

.sa-table-tbody .sa-table-row td {
    border-bottom: 1px solid var(--saw-border-color);
    border-left: 1px solid transparent;
    border-right: 1px solid transparent;
}

.sa-table-tbody .sa-table-row td:first-child {
    border-left: none;
}

.sa-table-tbody .sa-table-row td:last-child {
    border-right: none;
}

/* ============================================
   ROW STATES
   ============================================ */
.sa-table-row--selected {
    background: var(--saw-brand-50);
}

.sa-table-row--active {
    background: var(--saw-brand-50) !important;
    border-left: 3px solid var(--saw-brand-600) !important;
}

.sa-table-row--active td {
    background: var(--saw-brand-50) !important;
}

.sa-table-row--clickable {
    cursor: pointer;
}

/* ============================================
   CELLS
   ============================================ */
.sa-table-cell {
    display: table-cell;
    padding: var(--saw-space-3) var(--saw-space-4);
    font-size: var(--saw-text-sm);
    color: var(--saw-text-primary);
    vertical-align: middle;
}

.sa-table-cell--center {
    text-align: center;
}

.sa-table-cell--right {
    text-align: right;
}

/* ============================================
   CELL CONTENT TYPES
   ============================================ */
.sa-table-cell-image-wrapper {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.sa-table-cell-image {
    max-width: 40px;
    max-height: 40px;
    border-radius: var(--saw-radius-md);
    object-fit: cover;
}

.sa-table-cell-image-placeholder {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--saw-bg-tertiary);
    border-radius: var(--saw-radius-md);
    color: var(--saw-text-muted);
}

/* ============================================
   SORTABLE HEADERS
   ============================================ */
.sa-table-sortable {
    display: inline-flex;
    align-items: center;
    gap: var(--saw-space-1);
    color: inherit;
    text-decoration: none;
    cursor: pointer;
}

.sa-table-sortable:hover {
    color: var(--saw-text-primary);
}

.sa-sort-icon {
    font-size: 0.75rem;
    opacity: 0.5;
}

.sa-sort-icon--active {
    opacity: 1;
    color: var(--saw-brand-600);
}

/* ============================================
   RESPONSIVE
   ============================================ */
@media (max-width: 768px) {
    .sa-table-thead th,
    .sa-table-th {
        top: var(--saw-toolbar-height-mobile, 42px) !important; /* CSS proměnná s fallbackem */
        padding: 6px var(--saw-space-3);
        font-size: 0.7rem;
        white-space: nowrap; /* Zabraňuje zalamování textu v hlavičce */
    }
    
    .sa-table-cell {
        padding: var(--saw-space-2) var(--saw-space-3);
        font-size: var(--saw-text-xs);
        min-width: 100px; /* Minimální šířka sloupce na mobilu - zvýšeno z 80px */
        word-wrap: break-word;
        overflow-wrap: break-word;
    }
    
    /* První sloupec (obrázek) - fixní šířka na mobilu */
    .sa-table-tbody .sa-table-row td:first-child,
    .sa-table-thead th:first-child {
        min-width: 70px; /* Zvýšeno z 60px */
        width: 70px;
        max-width: 70px;
        padding-left: var(--saw-space-2);
        padding-right: var(--saw-space-2);
        text-align: center;
    }
    
    /* Druhý sloupec (obvykle název) - širší na mobilu */
    .sa-table-tbody .sa-table-row td:nth-child(2),
    .sa-table-thead th:nth-child(2) {
        min-width: 120px; /* Širší pro název */
    }
    
    /* Ostatní sloupce - flexibilní šířka */
    .sa-table-tbody .sa-table-row td:nth-child(n+3),
    .sa-table-thead th:nth-child(n+3) {
        min-width: 90px;
    }
    
    .sa-table-cell-image-wrapper,
    .sa-table-cell-image,
    .sa-table-cell-image-placeholder {
        width: 50px; /* Větší na mobilu pro lepší viditelnost - zvýšeno z 40px */
        height: 50px;
    }
    
    /* Zajistit, že tabulka má horizontální scroll na mobilu */
    .sa-table-scroll {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
}

/* Extra malé obrazovky */
@media (max-width: 480px) {
    .sa-table-cell {
        padding: var(--saw-space-2);
        font-size: 0.7rem;
        min-width: 90px; /* Mírně menší na velmi malých obrazovkách */
    }
    
    .sa-table-thead th,
    .sa-table-th {
        padding: 4px var(--saw-space-2);
        font-size: 0.65rem;
    }
    
    /* První sloupec ještě kompaktnější */
    .sa-table-tbody .sa-table-row td:first-child,
    .sa-table-thead th:first-child {
        min-width: 60px;
        width: 60px;
        max-width: 60px;
    }
    
    .sa-table-cell-image-wrapper,
    .sa-table-cell-image,
    .sa-table-cell-image-placeholder {
        width: 45px;
        height: 45px;
    }
}